---
title: "Project Proposal"
author: "Paulo Souza"
output:
  pdf_document: default
  html_notebook: default
  html_document:
    df_print: paged
---

# Dataset Information

The dataset contains information about the players that have won the NBA's Men of the Week's award. The NBA (National Basketball Association) is a men's professional basketball league in North America; composed of 30 teams (29 in the United States and 1 in Canada). It is widely considered to be the premier men's professional basketball league in the world [[Wikipedia](https://en.wikipedia.org/wiki/National_Basketball_Association)]. This dataset was obtained from [Kaggle](https://www.kaggle.com/jacobbaruch/nba-player-of-the-week).

# Dataset Semantics

Each row of the dataset contains the following information about each player awarded with the Player of the Week prize:

- Age (player age at the time)
- Conference (East/West/NaN)
- Date (award date)
- Draft Year
- Height (in feets)
- Player
- Position
- Season
- Season short (season ending year)
- Seasons in league
- Team
- Weight (in pounds)
- Real_value (If two awards given at the same week [East & West] the player got 0.5, else 1 point)


# Data Analysis

Firstly, I read the dataset and call the `summary()` function in order to get some insights about the data.

```{r}
rm(list=ls())
library(dplyr)
library(ggplot2)
dataset <- read.csv("NBA_player_of_the_week.csv")
summary(dataset)
```

According to the `summary()` function output, there are 384 entries in the dataset in which the Conference field is not filled. Hence, I'm gonna print the first lines of the dataset with the `head()` function to check how I could fix it.

```{r}
head(dataset)
```

The output of the `head()` function was actually very useful since I realized that I could just use the team name as a reference in order to fill the empty Conference fields. I mean, as far as I know, most of the teams active nowadays already exist back in the 80s (date of the first records in the dataset), so I could just compare the teams of the filled rows with the teams of the empty ones, and if the team is the same in both lines, then I should be able to get the name of the conference of those empty rows. In order to do that, I'm gonna create a loop that goes through each row of the dataset that contains a value in the Conference field, then I just have to tell R to replace the field Conference of each other lines of the same team with the value I get from the Conference field of that line:

```{r}
rows = as.integer(dataset %>% count())
for (i in 1:rows)
{
  if (toString(dataset[i, 2]) != "")
  {
    for (j in 1:rows)
    {
      if (dataset[i, 11] == dataset[j, 11])
      {
        dataset[j, 2] = dataset[i, 2]
      }
    }
  }
}
summary(dataset)
head(dataset)
dataset %>% filter(Conference == "") %>% count()
```


Even doing the aforementioned adjust, I realized that there are still 8 entries without a value in the Conference field. Thus, I decided to print those values in order to check what I could do.


```{r}
dataset %>% filter(Conference == "")
```

According to the output of the previous command, only the entries of Washington Bullets players are still without content in the Conference field. That's a little awkward because I don't believe none of the players of this team own the Player of the Week since 1997. Then, I decided to do some research on Washington Bullets: According to [Wikipedia](https://en.wikipedia.org/wiki/Washington_Wizards), in 1997 the director board of the Washington Bullets rebranded themselves as the Wizards.

Thus, I decided to print out the records of players of Washington Wizards and check which conference it belongs in order to update the Conference field in the old records of the team, and finally I use `filter()` and `count()` functions in order to check the number of entries without conference remaining.

```{r}
dataset %>% filter(Team == "Washington Wizards") %>% select(Conference)
# Washington Wizards Conference: East
rows = as.integer(dataset %>% count())
for (i in 1:rows)
{
  if (toString(dataset[i, 11]) == "Washington Bullets")
  {
    dataset[i, 11] = "Washington Wizards"
    dataset[i, 2] = "East"
  }
}
summary(dataset)
dataset %>% filter(Conference == "") %>% count()
```

After realizing the data are well formatted, I decided to start the actual data analysis. Firstly I wanted to check which players most have owned the Player of the Week award.

```{r}
dataset %>% select(Player, Conference, Age, Position) %>% group_by(Player) %>% summarise(n = n()) %>% arrange(desc(n)) %>% head(10) %>%
  ggplot(aes(x=Player, y=n)) + geom_point(size = 4) + theme_bw() +
  theme(plot.title = element_text(size = 18, face = "bold", hjust = .5),
        axis.text.x = element_text(size = 11, angle = 45, hjust = 1),
        axis.text.y = element_text(size = 11),
        axis.title.x = element_text(size = 15, face = "bold"),
        axis.title.y = element_text(size = 15, face = "bold")) +
  labs(title = "Top 10 Players with Most\n'Player of the Week' Nominations\n", x = "\nPlayer", y = "Number of Nominations\n")
```

The results were slightly surprising since Lebron James appeared with a crushing advantage above the other players. So, I decided to analyze which characteristics are responsible for building that huge difference. When we are talking about people characteristics, one of the first measures that come into my mind is height and weight. Thus, I decided to plot a chart in order to visualize the difference of these players regarding BMI (Body Mass Index), which is given by height (in kilos) multiplied by height (in meters) squared.

```{r}
transformHeight <- function(x){
  foot = as.numeric(strsplit(x,'-')[[1]][1])
  inches = as.numeric(strsplit(x,'-')[[1]][2])
  return((foot*12 + inches)*2.54)
}
print(transformHeight(toString(dataset[1, 5])))
dataset %>% select(Player, Height, Weight) %>% group_by(Player) %>% summarise(Height = transformHeight(toString(first(Height))), Weight = first(Weight), n = n()) %>% arrange(desc(n)) %>% head(10)


```




